console.log("nigger")



import {setNavEnglish, setNavSpanish, setNavCzech} from "./nav-language.js";

const videos = [
    [    
        {
            name: "Gr√≥nsk√° PARODIE",
            tags: ["parodie", "nohavica", "gronska", "gronsko"],
            format: "long-video",
            url: "https://www.youtube.com/watch?v=3WOsehrd7-A",
            thumbnail: "https://i.ytimg.com/vi/3WOsehrd7-A/hqdefault.jpg?sqp=-oaymwFBCNACELwBSFryq4qpAzMIARUAAIhCGAHYAQHiAQoIGBACGAY4AUAB8AEB-AG0B4AC0AWKAgwIABABGH8gQSgVMA8=&rs=AOn4CLAdPcx3P35c8sWJ8I16RU3cYs0YXw",
            published: 250529,
            views: 10,
            description: {
                cz: "Vtipn√° parodie p√≠sniƒçky od Jarom√≠ra Nohavicy jm√©nem Gr√≥snk√° p√≠sniƒçka. Video obsahuje origin√°ln√≠ video p√≠snƒõ a p≈ôidan√©, humoristick√©, kr√°tk√© pas√°≈æe z internetu.",
                en: "Funny parody of the song 'Gr√≥snk√° p√≠sniƒçka' (Greenlandic Song) by Jarom√≠r Nohavica. The video contains the original song video and added, humorous, short passages from the internet.",
                es: "Un v√≠deo muy divertido y un poco loco. Es una parodia de la canci√≥n 'Gr√≥snk√° p√≠sniƒçka' (Canci√≥n groenladesa) de Jarom√≠r Nohavica."
            }
         }, 
         {
            name: "CHALLENGE, VYDR≈Ω 24 HODIN V DIVOƒåINƒö!",
            format: "long-video",
            tags: ["challenge", "unbeliaveable", "wow", "divoƒçina", "competition", "wild"],
            url: "https://www.youtube.com/watch?v=fH6_QwWP8s8",
            thumbnail: "https://i.ytimg.com/vi/fH6_QwWP8s8/hqdefault.jpg?sqp=-oaymwEnCNACELwBSFryq4qpAxkIARUAAIhCGAHYAQHiAQoIGBACGAY4AUAB&rs=AOn4CLDcOarie59sfW1Co4sphsN3HZZUoQ", 
            published: 240722,
            views: 70,
            description: {
                cz: "Toto video bylo natoƒçeno v Bezkydech v roce 2024. Jedn√° se o parodii. Kvalita nen√≠ nejlep≈°√≠, proto≈æe video bylo natoƒçeno a sest≈ô√≠h√°no na telefonu.",
                en: "This video was shot in Bezkydy in 2024. It's a parody. The quality is not the best, because the video was shot and edited on a phone. ",
                es: "Este v√≠deo fue filmado en Bezkydy en el a√±o 2024. Es una parodia. La calidad no es buena, porque el v√≠deo fue filmado con tel√©fono."
            }
        },
        
        {
            name: "Porovn√°v√°n√≠ Pit√≠",
            tags: ["r√Ωbaar√≥ba", "fizi", "mogumogu", "recenze", "pit√≠"],
            format: "long-video",
            url: "https://www.youtube.com/watch?v=YJFmlnUIaVc&t=0s",
            thumbnail: "https://i.ytimg.com/vi/YJFmlnUIaVc/hqdefault.jpg?sqp=-oaymwFBCNACELwBSFryq4qpAzMIARUAAIhCGAHYAQHiAQoIGBACGAY4AUAB8AEB-AHOBYACgAqKAgwIABABGGUgTyhCMA8=&rs=AOn4CLCoStb1dIqyiq6E-SuyaPTD-XjF0w",
            published: 240518,
            views: 60,
            description: {
                cz: "Tohle video je porovn√°n√≠ a recenze pit√≠ Fizi drink Ultra Boris a Mogu Mogu Grapes.",
                en: "This video is a comparison and review of Fizi drink Ultra Boris and Mogu Mogu Grapes.",
                es: "Este v√≠deo es una compraci√≥n de bebidas: Fizi drink Ultra Boris y Mogu Mogu Grapes."
            }
        },
        
        {
            name: "Helicopter landing in Qaqortoq, Greenland",
            tags: [],
            format: "long-video",
            url: "https://www.youtube.com/watch?v=xYNBdQUCtAk",
            thumbnail: "https://i.ytimg.com/vi/xYNBdQUCtAk/hqdefault.jpg?sqp=-oaymwFBCNACELwBSFryq4qpAzMIARUAAIhCGAHYAQHiAQoIGBACGAY4AUAB8AEB-AH-CYAC0AWKAgwIABABGFUgXihlMA8=&rs=AOn4CLDnjOyW0gMOP7yPk-ZEQtloWTSPOg",
            published: 231014,
            views: 61,
            description: {
                cz: "Video s velmi ≈°patnou kvalitou, natoƒçeno v Qaqortoq, j√≠≈æn√≠ Gr√≥nsko 2023.",
                en: "Very poor quality video, shot in Qaqortoq, South Greenland 2023.",
                es: "Un v√≠deo con muy mala calidad, Sur Groenlandica 2023."
            }
        }
    ], 

    [
        {
            name: "When you finish your Duolingo lesson...",
            tags: ["duolingo", "annoying"],
            format: "short",
            url: "https://www.youtube.com/shorts/Lr4zL5Qg_jM",
            thumbnail: "https://i.ytimg.com/vi/Lr4zL5Qg_jM/oar2.jpg?sqp=-oaymwEoCJUDENAFSFqQAgHyq4qpAxcIARUAAIhC2AEB4gEKCBgQAhgGOAFAAQ==&rs=AOn4CLDCj8K5aYN19HRMqoyFC7cXrY3UYA",
            published: 240809,
            views: 580,
            description: {
              cz: "Toto video ukazuje jak otravn√Ω design m√° Duolingo.",
              en: "This video shows the annoying design of Duolingo.",
              es: "Este video muestra lo molesto que es el dise√±o de Duolingo."
            }
        },
        
        {
            name: "Helicopter Take-off from Narsaq, Greenland.",
            tags: ["greenland", "takeoff", "helicopter", "nature"],
            format: "short",
            url: "https://www.youtube.com/shorts/lgKVcH67QFU",
            thumbnail: "https://i.ytimg.com/vi/lgKVcH67QFU/oar2.jpg?sqp=-oaymwEoCJUDENAFSFqQAgHyq4qpAxcIARUAAIhC2AEB4gEKCBgQAhgGOAFAAQ==&rs=AOn4CLAiT53mVVy8AyPTDeVkmJEtY3KgFA",
            published: 231014,
            views: 190,
            description: {
                cz: "Video natoƒçeno z helikopt√©ry Air Greenland p≈ôi odletu z Narsaqu, j√≠≈æn√≠ Gr√≥nsko 2023.",
                en: "Video shot from an Air Greenland helicopter departing from Narsaq, South Greenland 2023.",
                es: "Video que fue filmado desde de un Air Greenland helic√≥ptero que se sale de Narsaq, Sur Groenlandica 2023. "
            },
        },
        
        {
            name: "Landing in Nuuk, Greenland. (Time-lapse video)",
            tags: ["landing", "greenland", "nuuk"],
            format: "short",
            url: "https://www.youtube.com/shorts/b0G6XIKggnM",
            thumbnail: "https://i.ytimg.com/vi/b0G6XIKggnM/oardefault.jpg?sqp=-oaymwEoCJUDENAFSFqQAgHyq4qpAxcIARUAAIhC2AEB4gEKCBgQAhgGOAFAAQ==&rs=AOn4CLDuBrqrO2495awW2MVOYRTkJ_CjHw",
            published: 231218,
            views: 2260,
            description: {
                cz: "Zrychlen√© video natoƒçeno z letadla Air Greenland Dash 8-200 p≈ôi p≈ôist√°n√≠ v Nuuku, Gr√≥nsko 2023.",
                en: "Time-lapse video shot from an Air Greenland Dash 8-200 landing in Nuuk, Greenland 2023.",
                es: "Un v√≠deo de laspso de tiempo que fue filmado desde un Air Greenland Dash 8-200 durante aterrizaje en Nuuk, Groenlandica, 2023"
            }
        },
        
        {
            name: "Confused blind man falls into a poolüò®üò®üò®",
            tags: ["pool"],
            format: "short",
            url: "https://www.youtube.com/shorts/6uuQ894GgRo",
            thumbnail: "https://i.ytimg.com/vi_webp/6uuQ894GgRo/oar2.webp",
            published: 240101,
            views: 410,
            description: {
                cz: "Vtipn√© videjko.",
                en: "Funny video.",
                es: "Un v√≠deo divertido."
            },
        },
        
        {
            name: "Fish",
            tags: [],
            format: "short",
            url: "https://www.youtube.com/shorts/bnxfX8hfcV4",
            thumbnail: "https://i.ytimg.com/vi/bnxfX8hfcV4/oar2.jpg?sqp=-oaymwEoCJUDENAFSFqQAgHyq4qpAxcIARUAAIhC2AEB4gEKCBgQAhgGOAFAAQ==&rs=AOn4CLDsXY0-Q-JhHHeFo0i8_yZZf48mVA",
            published: 240121,
            views: 2530,
            description: {
                cz: "Video ryby ≈æijic√≠ v Brnƒõnsk√© zoo.",
                en: "Video of a fish in Brno zoo.",
                es: "V√≠deo de un pez en el zool√≥gico de Brno."
            }
        },
        
        {
            name: "How to SIGMA Bacon",
            tags: ["ohio", "sigma", "bacon", "brawlstars", "amazing", "iphone", "lifehack", "hashtag", "subscribe"],
            format: "short",
            url: "https://www.youtube.com/shorts/NsQ5hgQtVRI",
            thumbnail: "https://i.ytimg.com/vi/NsQ5hgQtVRI/oar2.jpg?sqp=-oaymwEoCJUDENAFSFqQAgHyq4qpAxcIARUAAIhC2AEB4gEKCBgQAhgGOAFAAQ==&rs=AOn4CLDzCO7CDVTKzRYkAhR_j3y307cq6w",
            published: 240601,
            views: 60,
            description: {
                cz: "N√°vod jak na operaƒçn√≠m syst√©mu iOS m√Ωt jednu aplikaci mnohokr√°t.",
                en: "Tutorial how to have the same app many times on iOS.",
                es: "Tutorial sobre c√≥mo tener la misma aplicaci√≥n varias veces en iOS."
            }
        },
        
        {
            name: "Sermitsiaq mountain waterfall near Nuuk, Greenland.",
            tags: ["greenland", "nuuk", "nature"],
            format: "short",
            url: "https://www.youtube.com/shorts/90DLZ6ggwpA",
            thumbnail: "https://i.ytimg.com/vi/90DLZ6ggwpA/oar2.jpg?sqp=-oaymwEoCJUDENAFSFqQAgHyq4qpAxcIARUAAIhC2AEB4gEKCBgQAhgGOAFAAQ==&rs=AOn4CLB13-Kmtha1qDsbpRgPZGvMl8C2hA",
            published: 231227,
            views: 210,
            description: {
                cz: "Video natoƒçeno z lodƒõ. Vodop√°d na ho≈ôe Sermitisiaq u Nuuku, zapadn√≠ Gr√≥nsko 2023.",
                en: "Video taken from a boat. Waterfall on Sermitsiaq mountain near Nuuk, West Greenland 2023.",
                es: "Un v√≠deo que fue filmado desde un barco. Cascada encima Sermitsiaq monta√±a, Oeste Groenlandica 2023."
            }
        },
        
        {
            name: "To je v√Ωhodn√©...!!!",
            tags: ["r√Ωbaar√≥ba", "amazing", "neuvƒõ≈ôiteln√©", "wow", "subscribe"],
            format: "short",
            url: "https://www.youtube.com/shorts/TQSxm-uGIy0",
            thumbnail: "https://i.ytimg.com/vi/TQSxm-uGIy0/oar2.jpg?sqp=-oaymwEoCJUDENAFSFqQAgHyq4qpAxcIARUAAIhC2AEB4gEKCBgQAhgGOAFAAQ==&rs=AOn4CLDy_IzaTZgRxkstb3DFQ6ljxKDpIQ",
            published: 240702,
            views: 61,
            description: {
                cz: "Odeb√≠rejte! Natoƒçeno v Brnƒõ.",
                en: "Subscribe! Shot in Brno.",
                es: "Subsribir! Filmado en Brno."
            }
        },
        
        {
            name: "Dog hunting mice",
            tags: ["dog", "mice", "animals", "vysoƒçina", "p√≠seƒçn√©"],
            format: "short",
            url: "https://www.youtube.com/shorts/hPVRGMevKCk",
            thumbnail: "https://i.ytimg.com/vi/hPVRGMevKCk/oar2.jpg?sqp=-oaymwEoCJUDENAFSFqQAgHyq4qpAxcIARUAAIhC2AEB4gEKCBgQAhgGOAFAAQ==&rs=AOn4CLB3XMHlcDNHunydLJDRix60_XTY9w",
            published: 240719,
            views: 520,
            description: {
                cz: "Video jak pes lov√≠ mi≈°i na Vsoƒçinƒõ.",
                en: "Video of dog hunting mice in Vysoƒçina.",
                es: "V√≠deo de un perro de caza."
            }
        },
    
        {
            name: "Odeb√≠r√°te kan√°l Tadeas Tolver?",
            tags: ["odeb√≠rej"],
            format: "short",
            url: "https://www.youtube.com/shorts/jrpK67BJ4OE",
            thumbnail: "https://i.ytimg.com/vi/jrpK67BJ4OE/oardefault.jpg?sqp=-oaymwEoCJUDENAFSFqQAgHyq4qpAxcIARUAAIhC2AEB4gEKCBgQAhgGOAFAAQ==&rs=AOn4CLAYi8YVpOETkMJ5A-1U4nHwZh2CXg",
            published: 240809,
            views: 30,
            description: {
              cz: "Odeb√≠rejte! Natoƒçeno na Vysoƒçinƒõ",
              en: "Subscribe! Shot in Vysoƒçina.",
              es: "Subscribir! Filmado en Vysoƒçina."
            }
        },
        
        {
            name: "Prvn√≠ lesn√≠ ≈æebr√°k v ƒåR.",
            tags: [],
            format: "short",
            url: "https://www.keysigns.co.uk/images/no-access-signs-p1310-40478_zoom.jpg",
            thumbnail: "https://imgur.com/Pjj696b.jpg",
            published: 207,
            views: 0,
            description: {
                cz: "V tomto velice vtipn√©m video je v√Ωlet√°≈ô se psem kter√Ω si u≈æ√≠v√° v√Ωlet. V√Ωlet√°≈ô v≈°ak potk√° nep≈ôijemn√©ho lesn√≠ho ≈æebr√°ka.",
                en: "In this funny video, there is a hiker with a dog enjoying their trip. However, the hiker meets an disgusting forest beggar.",
                es: "En este v√≠deo muy divertido aparece un excursionista con un perro disfrutando del viaje. Sin embargo, el excursionista se encuentra con un desagradable mendigo del bosque."
            }
        },
     
        {
            name: "Ochutn√°v√°n√≠ Skittles Giants Gooey",
            tags: ["skittles", "candy"],
            format: "short",
            url: "https://www.youtube.com/shorts/GTDKrA7ypsE",
            thumbnail: "https://i.ytimg.com/vi/GTDKrA7ypsE/oar2.jpg?sqp=-oaymwEoCJUDENAFSFqQAgHyq4qpAxcIARUAAIhC2AEB4gEKCBgQAhgGOAFAAQ==&rs=AOn4CLAvOxwTfkjAjjm2_BVEZN2C1TvDvQ",
            published: 240819,
            views: 50,
            description: {
              cz: "Ochutn√°v√°n√≠ Skittles Giants Gooey (sestra tam ru≈°√≠!).",
              en: "Skittles Giants Gooey review.",
              es: "Rese√±a de Skittles Giants Gooey."
            }
        },
            
        {
            name: "Dog dreaming",
            tags: ["dog", "dream", "pet"],
            format: "short",
            url: "https://www.youtube.com/shorts/E3AZdyGV4j0",
            thumbnail: "https://i.ytimg.com/vi/E3AZdyGV4j0/oar2.jpg?sqp=-oaymwEoCJUDENAFSFqQAgHyq4qpAxcIARUAAIhC2AEB4gEKCBgQAhgGOAFAAQ==&rs=AOn4CLABJoyGkEXAzB60ppOKU7FZNV6B4g",
            published: 240820,
            views: 270,
            description: {
              cz: "Video sp√≠c√≠ho psa.",
              en: "Video of a sleeping dog.",
              es: "V√≠deo de un perro durmiendo."
            }
        },
            
        {
            name: "Dog wont let go of tennis ball",
            tags: ["dog"],
            format: "short",
            url: "https://www.youtube.com/shorts/8M8H24A40_o",
            thumbnail: "https://imgur.com/M7XvA0T.jpg",
            published: 241103,
            views: 520,
            description: {
              cz: "V tomto video pes nechce pustit tenisov√Ω m√≠ƒç.",
              en: "In this video, the dog won't let go of the tennis ball.",
              es: "En este v√≠deo hay un perro que no quiere soltar la pelota de tenis."
            }
        }
    ]
];

const longVideosCon = document.querySelector("#long-videos-con");
const shortsCon = document.querySelector("#shorts-con");
const ytSearch = document.querySelector("#yt-search");
const labelForOrder = document.querySelector("#label-for-order");
const newestOption = document.querySelector("#newest");
const viewestOption = document.querySelector("#viewest");
const searchBar = document.querySelector("#yt-search");
const searchButton = document.querySelector("#search-button");

let language = localStorage.getItem("language");

if (language === "en") {
    setNavEnglish();
    ytSearch.placeholder = "Search for videos";
    labelForOrder.innerHTML = "Order:";
    newestOption.innerHTML = "üïí Newest.";
    viewestOption.innerHTML = "üëÅÔ∏è Most viewed.";
} else if (language === "es") {
    setNavSpanish();
    ytSearch.placeholder = "Busca v√≠deos";
    labelForOrder.innerHTML = "Orden:";
    newestOption.innerHTML = "üïí M√°s nuevo.";
    viewestOption.innerHTML = "üëÅÔ∏è M√°s visto.";
} else {
    setNavCzech();
    ytSearch.placeholder = "Hledejte videa";
    labelForOrder.innerHTML = "≈òazen√≠:";
    newestOption.innerHTML = "üïí Nejnovƒõj≈°√≠.";
    viewestOption.innerHTML = "üëÅÔ∏è Nejvzhl√©dnutƒõj≈°√≠.";
}



const bubbleSort = (array, data) => {
    const len = array.length;
    
    for (let i = 0; i < len; i++) {
      for (let j = 0; j < len - i - 1; j++) {
          if (array[j][data] < array[j + 1][data]) {
              // swap
              const temp = array[j];
              array[j] = array[j + 1];

              array[j + 1] = temp;
          }
       }
    }
};

async function getViews(videoId) {
    const apiKey = "AIzaSyAuayuzV6BxekZTH6rjqcrLyHJwvPh9Q6M";
    const url = `https://www.googleapis.com/youtube/v3/videos?part=statistics&id=${videoId}&key=${apiKey}`;

    const response = await fetch(url);
    const data = await response.json();

    if (data.items && data.items.length > 0) {
        const views = data.items[0].statistics.viewCount;
        return views;
    } else {
        throw new Error("Not found.");
    }
}

console.log(getViews("3WOsehrd7-A"));

function renderVideos() {
    let order = document.querySelector("#order-select").value;
    
    if (order === "üïí Nejnovƒõj≈°√≠." || order === "üïí Newest." || order === "üïí M√°s nuevo.") {
       bubbleSort(videos[0], "published");  
       bubbleSort(videos[1], "published");
    } else if (order === "üëÅÔ∏è Nejvzhl√©dnutƒõj≈°√≠." || order === "üëÅÔ∏è M√°s visto." || order === "üëÅÔ∏è Most viewed.") {
       bubbleSort(videos[0], "views");       
       bubbleSort(videos[1], "views");       
    }
    
    longVideosCon.innerHTML = "";
    shortsCon.innerHTML = "";
    videos.forEach((videoGroup) => {
        videoGroup.forEach((video) => {
            let container;

            if (video.format === "long-video") {
                container = longVideosCon;
            } else {
                container = shortsCon;
            }

            container.innerHTML += `
                <div class="${video.format}-con" id="${video.name.slice(0, 6).replace(/\s+/g, "") + video.name.length}">
                    <img src="${video.thumbnail}" class="${video.format}-image"/>
                    <div class="${video.format}-text-con">
                       <a href="${video.url}" target="_blank" style="text-decoration: none;"><h2 class="video-title ${(video.format === "short") ? "short-video-title" : ""}">${video.name}</h2></a>
                       <p class="video-text ${(video.format === "short") ? "short-video-text" : ""}">${video.description[language]}</p>             
                    </div>
                </div>
                
                
            `;
        });
    });
}

renderVideos();
document.querySelector("#order-select").addEventListener("change", renderVideos);


function searchFunction() {
    const search = searchBar.value.toLowerCase().replace(/\s+/g, "");
    let count = videos[0].length + videos[1].length; 
    
    videos[0].forEach((video) => {
        document.querySelector(`#${video.name.slice(0, 6).replace(/\s+/g, "") + video.name.length}`).classList.remove("hide");
        if (!(video.description[language].toLowerCase().replace(/\s+/g, "").includes(search)) && !(search in video.tags) && !(video.name.toLowerCase().replace(/\s+/g, "").includes(search))) {
            document.querySelector(`#${(video.name.slice(0, 6)).replace(/\s+/g, "") + video.name.length}`).classList.add("hide");
            count --;
        }
    });
    videos[1].forEach((video) => {
        document.querySelector(`#${video.name.slice(0, 6).replace(/\s+/g, "") + video.name.length}`).classList.remove("hide");
        if (!(video.description[language].toLowerCase().replace(/\s+/g, "").includes(search)) && !(search in video.tags) && !(video.name.toLowerCase().replace(/\s+/g, "").includes(search))) {
            document.querySelector(`#${video.name.slice(0, 6).replace(/\s+/g, "") + video.name.length}`).classList.add("hide");
            count --;
        }
    });
    
    if (count === 0) {
        document.querySelector("#no-results").style.display = "block";
    } else {
        document.querySelector("#no-results").style.display = "none";
    }
}

ytSearch.addEventListener("keyup", () => {
  if (event.key === "Enter") {
    searchFunction();   
  }
});

searchButton.addEventListener("click", () => {
    searchFunction();
});



